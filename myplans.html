<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Plans | DiNaDrawing</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fffaf2;
    }
  </style>
</head>
<body class="flex bg-[#fffaf2]">

<!-- SIDEBAR -->
<aside id="sidebar"
class="fixed top-4 left-0 h-[calc(100vh-1rem)] w-64
       bg-[#f4b41a] rounded-tr-3xl
       p-6 shadow
       hidden md:flex md:flex-col md:gap-6">

  <!-- HEADER -->
  <div class="flex items-center gap-2">
    <img src="Assets/dinadrawing-logo.png" alt="Logo" class="w-14">
    <h2 class="text-xl font-bold text-[#222]">DiNaDrawing</h2>
  </div>

  <!-- NAVIGATIONS -->
  <nav>
    <ul class="space-y-5">
      <li><a href="dashboard.html" class="block px-4 py-2 rounded-lg font-medium text-[#222] hover:bg-[#222] hover:text-white transition">Home</a></li>
      <li><a href="myplans.html" class="block px-4 py-2 rounded-lg font-medium bg-[#222] text-white hover:bg-[#111] transition">My Plans</a></li>
      <li><a href="help.html" class="block px-4 py-2 rounded-lg font-medium text-[#222] hover:bg-[#222] hover:text-white transition">Help</a></li>
      <li><a href="settings.html" class="block px-4 py-2 rounded-lg font-medium text-[#222] hover:bg-[#222] hover:text-white transition">Settings</a></li>
    </ul>
  </nav>
</aside>

  <!-- MAIN CONTENT -->
  <main class="ml-0 md:ml-64 flex-1 min-h-screen px-12 py-10 overflow-y-auto">

    <!-- PAGE TITLE -->
    <div class="flex justify-between items-center border-b-2 border-gray-200 pb-4 mb-6">
      <div class="flex flex-col">
        <h1 class="text-3xl font-bold">My Plans</h1>
        <span class="text-gray-600 text-sm">Manage, view, and edit your plans easily.</span>
      </div>
      <div class="flex items-center gap-3 relative">

        <!-- CREATE EVENT -->
    <button id="openCreateEvent" class="border border-[#222] bg-white px-4 py-2 rounded-2xl font-medium hover:bg-[#222] hover:text-white transition">
      <span class="hidden md:inline">+ Create Event</span>
      <span class="md:hidden">Create</span>
    </button>
    
    <!-- JOIN EVENT -->
    <button id="openJoinEvent" class="border border-[#222] bg-white px-4 py-2 rounded-2xl font-medium hover:bg-[#222] hover:text-white transition">
      <span class="hidden md:inline">Join Event</span>
      <span class="md:hidden">Join</span>
    </button>
       
<!-- TOPBAR (RIGHT) -->
<div class="flex items-center gap-4 relative">

  <!-- CREATE EVENT MODAL -->
<div id="createEventModal" class="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-2xl p-6 w-[500px] shadow-xl relative">
    <button id="closeCreateEvent" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-xl">
      &times;
    </button>

    <!-- HEADER -->
    <h2 class="text-2xl font-bold mb-1">Create Event</h2>
    <p class="text-sm text-gray-500 mb-4">
      Fill in the details to start planning your event.
    </p>

    <!-- EVENT NAME -->
    <label class="block text-sm font-medium mb-1">Event Name <span class="text-gray-400 text-xs">(required)</span> </label>
    <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-4" placeholder="Enter event name">

    <!-- DESCRIPTION WITH CHARACTER COUNT -->
    <label class="block text-sm font-medium mb-1">Description </label>
    <textarea id="eventDescription" maxlength="200" class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-1 resize-none h-20" placeholder="Write a short description..."></textarea>
    <div class="text-right text-xs text-gray-500 mb-4">
      <span id="charCount">0</span>/200
    </div>

    <!-- DATE & TIME SIDE BY SIDE -->
    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium mb-1">Date</label>
        <input type="date" class="w-full border border-gray-300 rounded-lg px-3 py-2">
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Time</label>
        <input type="time" class="w-full border border-gray-300 rounded-lg px-3 py-2">
      </div>
    </div>

    <!-- LOCATION -->
    <label class="block text-sm font-medium mb-1">Location</label>
    <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-6" placeholder="Enter location">

    <p class="text-gray-500 text-xs mb-4">
      Only Event Name is required. You can leave Description, Date, Time, and Location blank and create a poll for your attendees to vote on these details.
    </p>

    <!-- BUTTONS -->
    <div class="flex justify-end gap-3">
      <button id="cancelCreateEvent" class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition">
        Cancel
      </button>
      <button id= "saveCreateEvent" class="bg-[#f4b41a] px-4 py-2 rounded-lg font-medium hover:bg-[#e0a419] transition">
        Save & Continue
      </button>
    </div>

  </div>
</div>

<!-- JOIN EVENT MODAL -->
<div id="joinEventModal" class="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-2xl p-6 w-[500px] shadow-xl relative">
    <button id="closeJoinEvent" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-xl">
      &times;
    </button>

    <!-- HEADER -->
    <h2 class="text-2xl font-bold mb-1">Join Event</h2>
    <p class="text-sm text-gray-500 mb-4">
      Enter the event code or link to join.
    </p>

    <!-- INPUT FIELD -->
    <label class="block text-sm font-medium mb-1">Event Code / Link</label>
    <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-6" placeholder="Paste code or link here">

    <!-- BUTTONS -->
    <div class="flex justify-end gap-3">
      <button id="cancelJoinEvent" class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition">
        Cancel
      </button>
      <button id= "joinJoinEvent" class="bg-[#f4b41a] px-4 py-2 rounded-lg font-medium hover:bg-[#e0a419] transition">
        Join
      </button>
    </div>
  </div>
</div>

  <!-- NOTIFICATIONS -->
  <div>
    <button id="notificationBtn" class="relative w-9 h-9 flex items-center justify-center rounded-full bg-white border border-[#222] hover:bg-[#222] hover:text-white transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3c0 .386-.146.735-.395 1.002L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
    </svg>
    <span id="notificationDot" class="absolute top-1 right-1 w-2.5 h-2.5 bg-[#f4b41a] rounded-full"></span>
  </button>
  </div>

  <!-- PROFILE -->
  <div class="relative">
    <button id="profileBtn" class="flex items-center gap-2 bg-[#f4b41a]/30 border border-[#222] rounded-full px-3 py-1.5 hover:bg-[#f4b41a]/50 transition">
      <img src="Assets/Profile Icon/profile.png" alt="Profile" class="w-8 h-8 rounded-full border-2 border-[#f4b41a]">
      <span class="font-medium text-[#222] hidden md:inline">Venice</span>
    </button>

    <!-- PROFILE DROPDOWN -->
    <div id="profileDropdown" class="absolute right-0 mt-2 w-60 bg-white shadow-lg rounded-2xl border border-gray-200 hidden z-50">
      <div class="p-4 border-b border-gray-200 text-center bg-[#fffaf2] rounded-t-2xl">
        <img src="Assets/Profile Icon/profile.png" alt="Profile" class="w-12 h-12 mx-auto rounded-full border-2 border-[#f4b41a] mb-2 shadow">
        <h2 class="text-sm font-semibold text-[#222]">Venice</h2>
      </div>
      <div class="py-2">
        <a href="help.html" class="block px-4 py-2 text-sm hover:bg-gray-50">Help</a>
        <a href="aboutus.html" class="block px-4 py-2 text-sm hover:bg-gray-50">About Us</a>
        <a href="settings.html" class="block px-4 py-2 text-sm hover:bg-gray-50">Settings</a>
        <button id="logoutProfile" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50">Log out</button>
      </div>
    </div>
  </div>

  <!-- NOTIFICATION DROPDOWN -->
  <div id="notificationPanel"
       class="absolute top-full right-0 mt-2 w-[90vw] md:w-60 lg:w-80 max-w-[28rem]
              bg-white shadow-lg rounded-2xl border border-gray-200 hidden z-50">
    <div class="p-4 border-b border-gray-200 flex justify-between items-center">
      <h4 class="font-semibold">Notifications</h4>
      <a href="#" id="clearNotificationsTop" class="text-sm text-[#2563eb] hover:underline">Mark all as read</a>
    </div>
    <ul id="notificationList" class="p-4 space-y-3 max-h-64 overflow-y-auto">
      <li class="flex items-start gap-3 bg-white hover:bg-gray-50 p-2 rounded-lg cursor-pointer">
        <img src="Assets/Profile Icon/profile2.png" onerror="this.src='Assets/profile2.png'" alt="User" class="w-10 h-10 rounded-full border border-gray-200">
        <p class="text-sm"><strong>Kyle</strong> added 'Rice' to Assigned Tasks in <strong>Family Reunion.</strong></p>
      </li>
      <li class="flex items-start gap-3 bg-white hover:bg-gray-50 p-2 rounded-lg cursor-pointer">
        <img src="Assets/Profile Icon/profile4.png" alt="User" class="w-10 h-10 rounded-full border border-gray-200">
        <p class="text-sm"><strong>Ken</strong> voted for <strong>Oct 16</strong> as the final date for <strong>Birthday Trip.</strong></p>
      </li>
      <li class="flex items-start gap-3 bg-white hover:bg-gray-50 p-2 rounded-lg cursor-pointer">
        <img src="Assets/Profile Icon/profile3.png" alt="User" class="w-10 h-10 rounded-full border border-gray-200">
        <p class="text-sm"><strong>Andrea</strong> added 'Japan' to Poll in <strong>Birthday Trip.</strong></p>
      </li>
    </ul>
    <div class="border-t border-gray-200 p-3 text-center">
      <a href="#" id="clearNotificationsBottom" class="text-sm text-[#2563eb] hover:underline">Clear All Notifications</a>
    </div>
  </div>
</div>
  </div>
</div>

    <!-- VIEW TOGGLE (FOR ALL PLANS) -->
    <div class="flex justify-end items-center mb-6">
      <div class="flex gap-2">
        <button id="galleryViewBtn" class="bg-[#f4b41a] text-[#222] text-sm px-4 py-1.5 rounded-lg font-medium">Gallery</button>
        <button id="listViewBtn" class="text-gray-600 hover:text-[#222] text-sm px-4 py-1.5 rounded-lg font-medium">List</button>
      </div>
    </div>

    <!-- YOUR UPCOMING PLANS -->
<section class="mb-10">
  <h2 class="text-lg font-semibold mb-4">Your Upcoming Plans &gt;</h2>

  <!-- GALLERY VIEW -->
  <div id="galleryView" class="flex flex-wrap gap-6">

    <!-- UPCOMING PLAN 1 -->
    <div class="relative w-64 bg-white border border-gray-300 rounded-2xl overflow-hidden shadow group">
      <div class="bg-[#f4b41a] text-[#222] font-bold p-4 text-lg flex justify-between items-start">
        <div>
          Birthday Trip
          <div class="text-sm font-normal text-[#222]/80">Japan</div>
        </div>

        <!-- MENU (DELETE PLAN & DOWNLOAD PDF) -->
        <div class="relative">
          <button onclick="toggleMenu(this)" class="text-[#222] hover:text-gray-700 px-2 py-1 rounded-lg hover:bg-[#f5c94a]/30 transition">⋮</button>
          <div class="hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg text-sm z-10">
            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="deletePlan()">Delete Plan</button>
            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="downloadPDF()">Download PDF</button>
          </div>
        </div>
      </div>

      <div class="flex items-center justify-between p-4">
        <div class="text-center">
          <div class="text-xs text-gray-700">Oct</div>
          <div class="text-2xl font-bold text-[#222]">16</div>
        </div>
        <button class="bg-[#222] text-white text-sm px-4 py-1.5 rounded-lg hover:bg-[#444] transition">
          View
        </button>
      </div>
    </div>

    <!-- UPCOMING PLAN 2 -->
    <div class="relative w-64 bg-white border border-gray-300 rounded-2xl overflow-hidden shadow group">
      <div class="bg-green-600 text-[#222] font-bold p-4 text-lg flex justify-between items-start">
        <div>
          Family Reunion
          <div class="text-sm font-normal text-[#222]/80">Davao City</div>
        </div>

        <!-- MENU (DELETE PLAN & DOWNLOAD PDF) -->
        <div class="relative">
          <button onclick="toggleMenu(this)" class="text-[#222] hover:text-gray-700 px-2 py-1 rounded-lg hover:bg-green-500/30 transition">⋮</button>
          <div class="hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg text-sm z-10">
            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="deletePlan()">Delete Plan</button>
            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="downloadPDF()">Download PDF</button>
          </div>
        </div>
      </div>

      <div class="flex items-center justify-between p-4">
        <div class="text-center">
          <div class="text-xs text-gray-700">Oct</div>
          <div class="text-2xl font-bold text-[#222]">18</div>
        </div>
        <button class="bg-[#222] text-white text-sm px-4 py-1.5 rounded-lg hover:bg-[#444] transition">
          View
        </button>
      </div>
    </div>

  </div>

  <!-- LIST VIEW -->
  <div id="listView" class="hidden">
    <div class="bg-white rounded-2xl shadow border border-gray-200 overflow-hidden">
      <table class="w-full">
        <thead class="bg-gray-50 border-b border-gray-200">
          <tr>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700">Plan Name</th>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700">Location</th>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700">Date</th>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700"></th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr class="hover:bg-gray-50 transition">
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-[#f4b41a] rounded-lg flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-[#222]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                </div>
                <span class="font-medium text-[#222]">Birthday Trip</span>
              </div>
            </td>
            <td class="px-6 py-4 text-gray-600">Japan</td>
            <td class="px-6 py-4 text-gray-600">Oct 16, 2025</td>
            <td class="px-6 py-4">
              <div class="flex gap-2">
                <button class="bg-[#222] text-white text-sm px-4 py-1.5 rounded-lg hover:bg-[#444] transition">View</button>
                <div class="relative">
                  <button onclick="toggleMenu(this)" class="text-gray-600 hover:text-[#222] px-2 py-1 rounded-lg hover:bg-gray-100 transition">⋮</button>
                  <div class="hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg text-sm z-10">
                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="deletePlan()">Delete Plan</button>
                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="downloadPDF()">Download PDF</button>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          <tr class="hover:bg-gray-50 transition">
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                </div>
                <span class="font-medium text-[#222]">Family Reunion</span>
              </div>
            </td>
            <td class="px-6 py-4 text-gray-600">Davao City</td>
            <td class="px-6 py-4 text-gray-600">Oct 18, 2025</td>
            <td class="px-6 py-4">
              <div class="flex gap-2">
                <button class="bg-[#222] text-white text-sm px-4 py-1.5 rounded-lg hover:bg-[#444] transition">View</button>
                <div class="relative">
                  <button onclick="toggleMenu(this)" class="text-gray-600 hover:text-[#222] px-2 py-1 rounded-lg hover:bg-gray-100 transition">⋮</button>
                  <div class="hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg text-sm z-10">
                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="deletePlan()">Delete Plan</button>
                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="downloadPDF()">Download PDF</button>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- YOUR ONGOING PLANS -->
<section>
  <h2 class="text-lg font-semibold mb-4">Your Ongoing Plans &gt;</h2>

  <!-- GALLERY VIEW -->
  <div id="galleryView2" class="flex flex-wrap gap-6">
    
    <!-- ONGOING PLAN 1 -->
    <div class="relative w-64 bg-white border border-gray-300 rounded-2xl overflow-hidden shadow group">

      <div class="bg-blue-500 text-[#222] font-bold p-4 text-lg flex justify-between items-start">
        <div>
          Dagat naaa!
          <div class="text-sm font-normal text-[#222]/80">-</div>
        </div>

        <!-- MENU (DELETE PLAN & DOWNLOAD PDF) -->
        <div class="relative">
          <button onclick="toggleMenu(this)" class="text-[#222] hover:text-gray-700 px-2 py-1 rounded-lg hover:bg-blue-400/30 transition">⋮</button>
          <div class="hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg text-sm z-10">
            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="deletePlan()">Delete Plan</button>
            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="downloadPDF()">Download PDF</button>
          </div>
        </div>
      </div>

      <div class="flex items-center justify-between p-4">
        <div class="text-center">
          <div class="text-xs text-gray-700">-</div>
          <div class="text-2xl font-bold text-[#222]">-</div>
        </div>
        <button onclick="window.location.href='plan_feed.html'" 
          class="bg-[#222] text-white text-sm px-4 py-1.5 rounded-lg hover:bg-[#444] transition">
          View
        </button>
      </div>
    </div>

  <!-- LIST VIEW -->
  <div id="listView2" class="hidden">
    <div class="bg-white rounded-2xl shadow border border-gray-200 overflow-hidden">
      <table class="w-full">
        <thead class="bg-gray-50 border-b border-gray-200">
          <tr>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700">Plan Name</th>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700">Location</th>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700">Date</th>
            <th class="text-left px-6 py-3 text-sm font-medium text-gray-700"></th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr class="hover:bg-gray-50 transition">
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                </div>
                <span class="font-medium text-[#222]">Dagat naaa!</span>
              </div>
            </td>
            <td class="px-6 py-4 text-gray-600">-</td>
            <td class="px-6 py-4 text-gray-600">-</td>
            <td class="px-6 py-4">
              <div class="flex gap-2">
                <button onclick="window.location.href='plan_feed.html'" class="bg-[#222] text-white text-sm px-4 py-1.5 rounded-lg hover:bg-[#444] transition">View</button>
                <div class="relative">
                  <button onclick="toggleMenu(this)" class="text-gray-600 hover:text-[#222] px-2 py-1 rounded-lg hover:bg-gray-100 transition">⋮</button>
                  <div class="hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg text-sm z-10">
                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="deletePlan()">Delete Plan</button>
                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 transition" onclick="downloadPDF()">Download PDF</button>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- SCRIPTS -->

<!-- Add jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  // UNIFIED VIEW TOGGLE (CONTROLS BOTH SECTIONS)
  const galleryViewBtn = document.getElementById("galleryViewBtn");
  const listViewBtn = document.getElementById("listViewBtn");
  const galleryView = document.getElementById("galleryView");
  const listView = document.getElementById("listView");
  const galleryView2 = document.getElementById("galleryView2");
  const listView2 = document.getElementById("listView2");

  galleryViewBtn.addEventListener("click", () => {
    // Show gallery view for both sections
    galleryView.classList.remove("hidden");
    listView.classList.add("hidden");
    galleryView2.classList.remove("hidden");
    listView2.classList.add("hidden");
    
    // Update button styles
    galleryViewBtn.classList.add("bg-[#f4b41a]", "text-[#222]");
    galleryViewBtn.classList.remove("text-gray-600");
    listViewBtn.classList.remove("bg-[#f4b41a]", "text-[#222]");
    listViewBtn.classList.add("text-gray-600");
  });

  listViewBtn.addEventListener("click", () => {
    // Show list view for both sections
    galleryView.classList.add("hidden");
    listView.classList.remove("hidden");
    galleryView2.classList.add("hidden");
    listView2.classList.remove("hidden");
    
    // Update button styles
    listViewBtn.classList.add("bg-[#f4b41a]", "text-[#222]");
    listViewBtn.classList.remove("text-gray-600");
    galleryViewBtn.classList.remove("bg-[#f4b41a]", "text-[#222]");
    galleryViewBtn.classList.add("text-gray-600");
  });

  function toggleMenu(button) {
    const menu = button.nextElementSibling;
    document.querySelectorAll('.group .absolute.mt-2, table .absolute.mt-2').forEach(m => {
      if (m !== menu) m.classList.add('hidden');
    });
    menu.classList.toggle('hidden');
  }

  function deletePlan() {
    alert("Plan deleted successfully!");
  }

  // DOWNLOAD PDF
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // HEADER
    doc.setFillColor(244, 180, 26); 
    doc.rect(0, 0, 210, 25, 'F');
    doc.setFontSize(18);
    doc.setFont('poppins', 'bold');
    doc.text("DiNaDrawing Plan Receipt", 20, 17);

    // BODY
    doc.setFontSize(14);
    doc.setTextColor(0, 0, 0);
    doc.text("Plan Title: Dagat naaa!", 20, 45);
    doc.text("Location: Batangas", 20, 55);
    doc.text("Date: October 16, 2025", 20, 65);
    doc.text("Status: Ongoing", 20, 75);

    // FOOTER
    doc.setFontSize(10);
    doc.setTextColor(100);
    doc.text("Thank you for using DiNaDrawing!", 20, 95);

    // NEW 
    const pdfBlob = doc.output('blob');
    const pdfURL = URL.createObjectURL(pdfBlob);
    window.open(pdfURL, '_blank');
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.relative')) {
      document.querySelectorAll('.group .absolute.mt-2').forEach(m => m.classList.add('hidden'));
    }
  });
  </script>

  <script>
  // CREATE EVENT MODAL
  document.getElementById("openCreateEvent").addEventListener("click", function () {
    document.getElementById("createEventModal").classList.remove("hidden");
  });
  
  // CLOSE BY (X) BUTTON
  document.getElementById("closeCreateEvent").addEventListener("click", function () {
    document.getElementById("createEventModal").classList.add("hidden");
  });
  
  // CLOSE BY CANCEL BUTTON
  document.getElementById("cancelCreateEvent").addEventListener("click", function () {
    document.getElementById("createEventModal").classList.add("hidden");
  });

  // CLOSE BY SAVE AND CONTINUE BUTTON
  document.getElementById("saveCreateEvent").addEventListener("click", function () {
    document.getElementById("createEventModal").classList.add("hidden");
  });
  
  // CLOSE BY CLICKING BACKDROP
  document.getElementById("createEventModal").addEventListener("click", function (e) {
    if (e.target === this) {
      this.classList.add("hidden");
    }
  });
  
  // DESCRIPTION CHAR COUNT
  const desc = document.getElementById("eventDescription");
  const charCount = document.getElementById("charCount");
  
  desc.addEventListener("input", function () {
    charCount.textContent = desc.value.length;
  });

// JOIN EVENT MODAL
document.getElementById("openJoinEvent").addEventListener("click", function () {
  document.getElementById("joinEventModal").classList.remove("hidden");
});

// CLOSE BY (X) BUTTON
document.getElementById("closeJoinEvent").addEventListener("click", function () {
  document.getElementById("joinEventModal").classList.add("hidden");
});

// CLOSE BY CANCEL BUTTON
document.getElementById("cancelJoinEvent").addEventListener("click", function () {
  document.getElementById("joinEventModal").classList.add("hidden");
});

// CLOSE BY JOIN BUTTON
document.getElementById("joinJoinEvent").addEventListener("click", function () {
  document.getElementById("joinEventModal").classList.add("hidden");
});

// CLOSE BY CLICKING BACKDROP
document.getElementById("joinEventModal").addEventListener("click", function (e) {
  if (e.target === this) {
    this.classList.add("hidden");
  }
});

  // NOTIFICATION DROPDOWN
  const notificationBtn = document.getElementById("notificationBtn");
  const notificationPanel = document.getElementById("notificationPanel");
  const notificationDot = document.getElementById("notificationDot");
  const clearTop = document.getElementById("clearNotificationsTop");
  const clearBottom = document.getElementById("clearNotificationsBottom");
  const notifList = document.getElementById("notificationList");

  notificationBtn?.addEventListener("click", (e) => {
    e.stopPropagation();
    document.getElementById('profileDropdown')?.classList.add('hidden');
    notificationPanel?.classList.toggle("hidden");
    if (!notificationPanel?.classList.contains("hidden")) {
      notificationDot?.classList.add("hidden");
    }
  });
  function clearNotifications(e){
    e?.preventDefault();
    if (notifList) notifList.innerHTML = '<li class="text-center text-gray-500 text-sm py-4">No notifications</li>';
    notificationDot?.classList.add("hidden");
  }
  clearTop?.addEventListener("click", clearNotifications);
  clearBottom?.addEventListener("click", clearNotifications);

  // PROFILE DROPDOWN
  const profileBtn = document.getElementById('profileBtn');
  const profileDropdown = document.getElementById('profileDropdown');
  profileBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    notificationPanel?.classList.add('hidden');
    profileDropdown?.classList.toggle('hidden');
  });
  document.addEventListener('click', (e) => {
    if (!profileBtn?.contains(e.target) && !profileDropdown?.contains(e.target)) {
      profileDropdown?.classList.add('hidden');
    }
    if (!notificationBtn?.contains(e.target) && !notificationPanel?.contains(e.target)) {
      notificationPanel?.classList.add('hidden');
    }
  });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      profileDropdown?.classList.add('hidden');
      notificationPanel?.classList.add('hidden');
    }
  });
  document.getElementById('logoutProfile')?.addEventListener('click', () => {
    document.getElementById('logoutBtn')?.click();
  });
</script>

<!-- LOGOUT FUNCTION -->
<script type="module">
    import { auth } from './firebase-config.js'; 
    import { signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    document.addEventListener('DOMContentLoaded', function() {
      const logoutSidebar = document.getElementById('logoutBtn');
      const logoutProfile = document.getElementById('logoutProfile');

      function handleLogout() {
        signOut(auth).then(() => {
          console.log('User signed out successfully');
          window.location.href = 'index.html';
        }).catch((error) => {
          console.error('Logout error:', error);
          alert('Logout failed. Please try again.');
        });
      }

      if (logoutSidebar) {
        logoutSidebar.addEventListener('click', handleLogout);
      }
      if (logoutProfile) {
        logoutProfile.addEventListener('click', handleLogout);
      }
    });
  </script>

</body>
</html>